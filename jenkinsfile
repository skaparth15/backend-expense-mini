pipeline {
agent{
    label "agent"
}

stages{
    stage("installing dependinces"){
        steps{
            sh """
                npm install
                ls -ltr
            """
        }
    }
      stage("packaging the compiled code"){
        steps{
            sh """
                zip -r backend.zip . -x jenkinsfile -x .git -x backend.*

            """
            }

    }

    stage("uploading the package to nexus"){
        steps{
            nexusArtifactUploader(
                nexusVersion: 'nexus3',
                protocol: 'http',
                nexusUrl: '3.92.139.59:8081',
                groupId: 'com.expense',
                version: '1.0',
                credentialsId: "nexus-cred",
                repository: 'backend-expense',
                artifacts: [
                    [artifactId: 'backend',
                        classifier: '',
                        file: 'backend.zip',
                        type: 'zip']
                ]
                )
            }
    }
}

}